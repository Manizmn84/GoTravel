<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Passenger List</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React -->
  <script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>

  <!-- Babel -->
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

  <style>
    body {
      background: radial-gradient(circle at top, #1e1b4b, #020617);
      min-height: 100vh;
      color: white;
      display: flex;
      justify-content: center;
      align-items: center;
    }
  </style>
</head>
<body>

<div id="root"></div>

<script type="text/babel">
  function App() {

    const [passengers, setPassengers] = React.useState([]);
    const [loading, setLoading] = React.useState(true);

    // ===============================
    // LOAD PASSENGERS
    // ===============================
    React.useEffect(function () {
      fetch("http://localhost:8080/passengers")
        .then(function (res) {
          return res.json();
        })
        .then(function (result) {
          var list = result && result.data ? result.data : [];

          // Normalize backend keys
          var normalized = list.map(function (p) {
            return {
              id: p.ID,
              email: p.Email,
              firstName: p.FirstName,
              lastName: p.LastName,
              gender: p.Gender,
              nationalCode: p.NationalCode,
              phone: p.Phone
            };
          });

          setPassengers(normalized);
          setLoading(false);
        })
        .catch(function (err) {
          console.error(err);
          setPassengers([]);
          setLoading(false);
        });
    }, []);

    return (
      <div className="w-full max-w-6xl p-8 bg-white/10 rounded-xl backdrop-blur-lg shadow-xl">

        <h1 className="text-3xl font-bold mb-8 text-center text-purple-300">
          Passenger List
        </h1>

        {/* Loading */}
        {loading && (
          <div className="text-center text-purple-300">
            Loading passengers...
          </div>
        )}

        {/* Table */}
        {!loading && passengers.length > 0 && (
          <div className="overflow-x-auto">
            <table className="w-full border-collapse text-sm">
              <thead>
                <tr className="text-purple-300 border-b border-purple-500">
                  <th className="p-3 text-left">#</th>
                  <th className="p-3 text-left">Name</th>
                  <th className="p-3 text-left">Email</th>
                  <th className="p-3 text-left">Gender</th>
                  <th className="p-3 text-left">National Code</th>
                  <th className="p-3 text-left">Phone</th>
                </tr>
              </thead>
              <tbody>
                {passengers.map(function (p, index) {
                  return (
                    <tr
                      key={p.id}
                      className="border-b border-white/10 hover:bg-white/5"
                    >
                      <td className="p-3">{index + 1}</td>
                      <td className="p-3">
                        {p.firstName} {p.lastName}
                      </td>
                      <td className="p-3 text-purple-200">
                        {p.email}
                      </td>
                      <td className="p-3 capitalize">
                        {p.gender}
                      </td>
                      <td className="p-3">
                        {p.nationalCode}
                      </td>
                      <td className="p-3">
                        {p.phone}
                      </td>
                    </tr>
                  );
                })}
              </tbody>
            </table>
          </div>
        )}

        {/* Empty */}
        {!loading && passengers.length === 0 && (
          <div className="text-center text-slate-400">
            No passengers found
          </div>
        )}

      </div>
    );
  }

  ReactDOM.render(<App />, document.getElementById("root"));
</script>

</body>
</html>
